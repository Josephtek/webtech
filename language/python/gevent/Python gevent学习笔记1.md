
 gevent是Python的一个用于网络IO的函数库，其中应用到了 coroutine(协同程序) 的思想。首先来了解下目前网络框架的几种基本的网络I/O模型： 

 
 阻塞式单线程：这是最基本的I/O模型，只有在处理完一个请求之后才会处理下一个请求。它的缺点是效能差，如果有请求阻塞住，会让服务无法继续接受请求。但是这种模型编写代码相对简单，在应对访问量不大的情况时是非常适合的。 

 
 阻塞式多线程：针对于单线程接受请求量有限的缺点，一个很自然的想法就是给每一个请求开一个线程去处理。这样做的好处是能够接受更多的请求，缺点是在线程产生到一定数量之后，进程之间需要大量进行切换上下文的操作，会占用CPU大量的时间，不过这样处理的话编写代码的难道稍高于单进程的情况。 

 
 非阻塞式事件驱动：为了解决多线程的问题，有一种做法是利用一个循环来检查是否有网络IO的事件发生，以便决定如何来进行处理（reactor设计模式）。这样的做的好处是进一步降低了CPU的资源消耗。缺点是这样做会让程序难以编写，因为请求接受后的处理过程由reactor来决定，使得程序的执行流程难以把握。当接受到一个请求后如果涉及到阻塞的操作，这个请求的处理就会停下来去接受另一个请求，程序执行的流程不会像线性程序那样直观。twisted框架就是应用这种IO模型的典型例子。 

 
 非阻塞式Coroutine：这个模式是为了解决事件驱动模型执行流程不直观的问题，它在本质上也是事件驱动的，加入了Coroutine的概念，我要学习的gevent就是应用这种IO模型的函数库。 

 
 接下来说说Coroutine（协程）这个概念，coroutine可以理解为一个轻量级的线程，为了解决了多线程上下文切换的损耗，提供了一个软件的协程切换。并且相对于事件驱动，能够将程序的执行过程由编写程序的人更好的控制。下面的图展现了协程的执行过程： 

 
 ![http://static.oschina.net/uploads/space/2013/0617/212849_K9JV_347504.jpg](http://static.oschina.net/uploads/space/2013/0617/212849_K9JV_347504.jpg)

 
 在了解了关于gevent的基本概念之后，接下来了就开始安装gevent。 

 
 

 

```
apt-get install libevent-dev
apt-get install python-all-dev
pip install gevent
```
 


 
 现在基本的概念了解后，接下来就可以开始了解相关的代码了 




